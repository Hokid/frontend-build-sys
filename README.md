# frontend-build-sys
    
    working-dir/  
    |- build/  
       |- css/  
       |- html/  
       |- img/ 
       |- js/  
       |- fonts/ 
       |- glyphs/  
    |- src/  
       |- sass/  
       |- html/  
       |- img/ 
       |- js/  
       |- fonts/ 
       |- glyphs/  


# working-dir / src /

Директория исходников, файлов для сборки.

#### working-dir / src / sass /

Директория исходников SASS-файлов.    

Структура файлов:

    sass
    |- _env/    - * 1
    |- common/  - * 2
    |- styles/  - * 3
    |- vendors/ - * 4  
    
Описание пунктов:
  
1. Сокращенно от environment(окружение). В директории располагаются "надбавки" SASS для CSS, расширяющие его возможности.
2. Общие стили. База общих, универсальных стилей, которые подключаются, используются в проэктных стилях.
3. Стили. Директория содержит проэктные стили, компилируемые в CSS и используемые на сайте.
4. Сторонний код. К примеру: compass, foundation, bootstrap.

#### working-dir / src / sass / _env /

Структура файлов:

    |- _env/
       |- functions/        - * 1
       |- mixins/           - * 2
       |- variables/        - * 3
          |- const/         - * 4
          |- settings/      - * 5
       |- _env-imports.scss - * 6

Описание пунктов:

1. Функции. В директории распологаются все написанные на SASS функции. Для каждой функции свой отдельный файл.
2. Миксины. В директории распологаются все написанный на SASS миксины. Для каждого миксина свой отделный файл.
3. Переменные. В директории распологаются различные переменные. Название SASS-файла с переменными лучше наименовать в соотвествии с котегорией данных, которые они хранят. К примеру, переменные, которые хранят цвета лучше распологать в файле _colors.scss, переменные, хранящие размеры шрифта, семейство шрифтов и данные, которые относятся и будут подставляться или как-то учавствовать в формировании значение CSS свойств, влияющих на шрифт, размещать в файле с названием _typography.scss.
4. Константы. Те же самые переменные, но воспринимаются как константы. Подключатся должны в самом начале _env-imports.scss файла и не менят своих значений.
5. Установки. Сборник переменных. Переменные, хрянящиеся в этой директории должны иметь общее назначение, быть абстрактными, не иметь ни какого отношения к конкретным style.scss файлам. Переменны, как было описано в 4 пункте, должны быть разбиты по котегориям.
6. Импорт-файл. В файле прописаны все импорты SASS-файлов, находящихся в директории _env, и, при необходимости, импорт сторонних библиотек(к примеру compass, который сейчас используется в этом файле). Импорт сторонних библиотек должен быть выполнен аккуратно, чтобы не поломать, испортить, перепесать текущие импорты.

#### working-dir / src / sass / common /

Структура файлов:

    |- common/
       |- adjustment/   - * 1
       |- base/         - * 2
       |- blocks/       - * 3
       |- placeholders/ - * 4
       
Описание пунктов:

1. Подгонка/Подстройка/Настройка. Сборник/Библиотека мини-классов, с помощью которых можно быстро настроить вид какого-либо элемента на страничке не прибегая к созданию для этого класса(или чего-то другого) со стилями, когда нужно просто подкоректировать padding, margin, font-size и т.п., грубо говоря, эти классы имеют высокую реюзабельность. Все классы начиются с префикса `a-` (сокр. от adjustment) - так понятней для чего этот класс и где его найти. Все классы имют после префиксов сокращенное названия от CSS свойства к которуму они относятся, к примеру, если класс называется `a-fz-1-25`, то это значит, что он применять `font-size` со значением 1.25 от базавого значения шрифта, которое по-умолчанию равно 16px(16 * 1.25 = 20). Сокращения имен классов в основном взяты из [Emmet Cheat Sheet](//docs.emmet.io/cheat-sheet/). Базовые значения можно настроить с помощью переменных. Подробней будет описанно ниже.
2. Базовые стили. Стандартные стили для html тэгов, reset, normalize все можно отнести к этой категории.
3. Блоки на сайте. Стили отдельных блоков на сайте(кнопки, формы ввода текста и т.п.). Дожны быть наиболее гибкими, настраиваемыми, реюзабельными, т.к. находятся в категории общие.
4. SASS плейсхолдеры.

#### working-dir / src / sass / common / adjustment /

Структура файлов:

    |- adjustment/
       |- box/        - * 1
       |- typography/ - * 2
       
Описание пунктов:

1. Стили, относящиеся к настройке, управлением в основном свойствами блочных элементов: `display`, `float`, `position`, `background-color`, `margin`, `padding`, `border` и т.д.
2. Стили, относящиеся к настройке, управлением в основном свойствами инлайновых элементов(шрифта, символов): `color`, `font-size`, `font-family`, `text-decoration`, `text-transform`, `vertical-align` и т.д.

*Создание новых классов в adjustment/*

Если это css свойство, которому не нужно задвать никаких величин(px, em  и т.д.), то добавлять новые классы можно по подобию:

    $a-disp-b-important: false !default; // * 1

    .a-disp-b {

      display: block if($a-disp-b-important, !important, null); // * 2
    }

1. Прописываем переменную, которой будем управлять "важностью" свойства. Именуется переменная по шаблону `{имя-класса}-important`.
2. Прописываем на какое css свойство будет влиять класс, а через `if` делаем проверку переменной, если `true`, то подставляем `!important`.

Если значения css свойства задаются величинами(px, em и т.д.), то для генерации разных значений можно использовать миксин `generate-values`, который находится в `_env/mixins/_generate-values.scss`.
Пример кода:

    @if mixin-exists('generate-values') { // * 1
    
    $a-margin-all-base-val: if($base-line-height, $base-line-height, 24px) !default; // * 2
    $a-margin-all-base-important: false !default; // * 2
    $a-margin-all-step: 1/4 !default; // * 2
    $a-margin-all-count: 24 !default; // * 2
    
    @include generate-values( // *3
      '.a-mrl-{w}{-f}',
       margin-left,
       $a-margin-all-base-val,
       $a-margin-all-step,
       $a-margin-all-count,
       $a-margin-all-base-important
     );
     
     ...
   
    $a-margin-all-loaded: true !global; // *4
    
    }

*(по какому принципу миксин генерирует классы с значения можно почитать в комментариях к мискину в коде)*  
*(чтобы не раздувать код примера, показан код генерации для только для `margin-left`, остальное(`margin-right`, `margin-top` и т.д.) скрыто под "...")*

1. Проверяем наличия нужного миксина для генерации значений, если есть продолжаем формирование класса(ов).
2. Прописываем переменные, которые управляют параметрами для миксина. Именуются переменные почти по такому же принципу как описано выше, но т.к. генерируется не один класс, а их множество для разных свойств, то шаблон для переменных будет выглядеть так: `a-{свойство}-all-{параметр-для миксина}`.
3. Генерируем класс с разными значениями.
4. Задаем глобальную переменую - индикатор того, что генерации прошла успешна(в некоторых случаях может пригодится, но она не обязаетельна). Шаблон именования для такой переменной: `a-{свойство}-all-loaded`.

*Органиция храниния классов в `box/`, `typography/`*

Принцип прост: создаем в директориях `box/`, `typography/` поддиректорию с названием свойства, где будут содержаться относящиеся к нему классы и далее организуем в поддиректории `.scss` файлы.  
Опишу на примерах. Есть свойство `display`, которому можно задавать такие значения, как: `block`, `inline`, `inline-block`, `none`, `table` и т.д.. `display` относится к категории `box`, потому создаем в директории `box/` поддиректорию `display/` - в этой поддиректории создаем `.scss` файлы c названиями значений, которые может принимать `display`, то есть: `_block.scss`, `_inline.scss`, `_inline-block.scss`, `_none.scss` и т.д., размещаем в них код классов, все. Можно организовать по др. принципу: создать в `display/` файл `_all.scs` - где будет содержатся код всех классов - так в основном делается для классов, которые генерируются с помощью миксина(как в примере с `margin-left`), но можно так делать и в этом случае, каких-либо ограничений нет, кому как удобно и в зависимости от количества значений, которое принимает свойство - если их много, 10+ к примеру, то лучше всего будет разделить на отдельные файлы, чем размещать все в `_all.scs`.

#### working-dir / src / sass / common / base /

Базовые стили. Стили, которы подключаются практически в самом начале проэкных стилей. Предназначение базовых стилей заключается в сглаживании разного визуального отображения как-либо html-тэгов при рендере в различных браузерах, придавая нам при написании своих стилей уверенности, что во всех браузерах страничка визуально будет выглядеть одинакого. CSS-свойства задаются в базовых по селекторам html-тэгов в основном. Пример базовых стилей можно посмотреть [здесь](https://necolas.github.io/normalize.css/)(normalize.css) и [здесь](http://meyerweb.com/eric/tools/css/reset/)(reset.css).

Как-либо рекомендаций по организации `.scss` файлов в директории нет.  
Можно хранить как угодно: делить файлы по тэгам(`_heading.scss`, `_img.scss`, `_p.scss` и т.д.), по контексту('_block.scss', `_inline.scss`), все зависит от личного удобства.

#### working-dir / src / sass / common / blocks /

В этой директории содержатся стили для составляющих страницу блоков, элементов: кнопки, навигация, формы, форма поиска на сайте, иконки, дропдауны и т.п.. Про блоки можно почитать в [БЭМ](https://ru.bem.info/) - там все описано с примерами, картинками или в [SMACSS](https://smacss.com/) про модули, но лучше там и там. Все блоки должны иметь свое название в виде css-класса, к примеру: `.button`, `.nav` и размещаться в директории с таким же названием: `_button.scss`, `_nav.scss`. Описывать подробно не нужно - это давно уже сдалано в различных метадологиях, т.е. концепция блоков и органиция файлов под эту концепцию. Строгая рекомендация: раз блок находится в категории общие, то он должен ей соотвествовать, т.е. название класса должно быть как можно больше абстрагированным, независимым, чтобы блок был более реюзабельным, применяемым в многих места так, чтобы название не вызывало вопросов: "какого ... он здесь делает? это же не логично!", блок должен быть как можно гибко настраивамым, через переменные, все таки общие блоки будут подключатся во многих проэктных стилях, и, в этих стилях понадобится изменить визуальный вид блока(`padding` поменять, `font-size` задать другой) - тут и помогут переменные.

#### working-dir / src / sass / common / placeholders /

В директории распологаются общие для проэктных стилей sass плейсхолдеры. Рекомендации по написаю плейсхолдеров сходятся с рекомендации для общих блоков(`/ common / blocks /`).

#### working-dir / src / sass / styles /

Описании структуры не требует - ее просто нет, она может быть любая. Директории в `sass / styles /`, содержащие проэктный стиль(и) имеют подобную структуру:

    {poroject-style-dir}/
    |- _env/
    |- base/
    |- adjustments/
    |- blocks/
    |- placeholders/
    |- vendors/
    |- _env-imports.scss         - * 1
    |- _adjustments-impotrs.scss - * 2
    |- {project-style-name}.scss

Описание:

`{poroject-style-dir}` - может иметь любое название.  
`{project-style-name}` - если проэктный стиль один в директории, то имя проэктного стиля будет `style`, если их множество, то: `style.{poroject-style-dir}.scss`, `style.{любое название}.scss`. Ограничений нет, т.е. если, к примеру, проэктный стил в директории один, то назвать его можно любым способом из предложенных шаблонов. Такое именования выбрано специально, чтобы сборщик проэктов(gulp) смог выделять проэктные стили от составляющих его частей.

1. В `_env-imports.scss` происходит импорт файлов из директорий `working-dir / src / sass / _env`, либо из локальной/проэктной `_env`(при наличии), либо все вместе. Не обязательный файл, можно делать импорт в проэктном стиле напрямую `working-dir / src / sass / _env / _env-imports.scss`.
2. В `_adjustments-impotrs.scss` происходить импорт файлов либо из `working-dir / src / sass / common / adjustments`, либо из локальной/проэктной `adjustments`(при наличии), либо все вместе. `_adjustments-impotrs.scss` - не обязательный файл, необходимость его создавать в том, когда импортируется большое кол-во файлов, дабы на растягивать длину проэктного стиля импортами из `adjustments`.

Структура файлов не должна обязательно содерать все поддиректории - какие-то просто не понадобятся, если это, к примеру, стили для небольшой страницы, где понадобятся в общем случае только: `style.scss`, `blocks/`.

Проэктный стиль содержит все импорты из `base`, `adjustments`(при необходимости), `blocks`, `placeholders`, импортируются файлы `_env-imports.scss`, `_adjustments-impotrs.scss`(при наличии).  
Порядок подключения можно определить логически, либо воспользоватся подсказкой:

    1. _env-imports.scss - всегда должен быть первый
    2. base/             - как можно выше подлючатся, но не обязательно
    3. adjustments/      - расположение любое, но ниже _env-imports.scss
    4. placeholders/     - расположение любое, но ниже _env-imports.scss
    5. vendors/          - расположение любое, но ниже _env-imports.scss
    6. blocks/           - расположение любое, но ниже _env-imports.scss, base/

Это примерная последовательность подключения, на самом деле она може быть любая, все зависит от потребностей разработчика. Также проэктный стиль содержит импорты из `working-dir / src / sass / common`, `working-dir / src / sass / vendors`, но не из
`working-dir / src / sass / _env` - только через `_env-imports.scss` и не из `working-dir / src / sass / styles`.

#### working-dir / src / sass / vendors /

Директория предназначена для стороннего кода([compass](http://compass-style.org/), [bootstrap](http://getbootstrap.com/), [foundation](http://foundation.zurb.com/) и т.д.). Сторониий код може также подтягиватся пакет-менеджерами([bower](http://bower.io/)), распологатся в другой директории(`working-dir / src / sass /`), к примеру в `working-dir / src / bower_components` - в таком случае в компиляторе это директория должна быть глобально-заданной, чтобы при импорте `.scss` файла не писать относительные пути `../../bower_components/{файл}.scss`, а сразу путь до файла относительно глобально заданной директории, т.е. пишем в пути `{файл}.scss`, то полный путь до файла будет автоматически распознаваться как `working-dir / src / bower_components / {файл}.scss`.

Организация файлов в `working-dir / src / sass / vendors` простая: создаем в ней поддиректорию с названием продукта(стороннего кода), к примеру `working-dir / src / sass / vendors / compass`. Организация файлов в директориях стороннего кода любая, очень рекомендуется в каждой директории(при возможности) иметь файл-импортов, к примеру `_compass-imports.scss` - его подключать уже в проэктных стилях.

`working-dir / src / sass / vendors` - в директории располагается сторонний код общего использования в проэктных файлах, какие-то изменения в поддиректориях не должны что-то поломать в проэктных файлах.

### Как прописывать пути в @import директиве

Импорт файлов в `@import` директиве делится на два способа:

1. импорт файлов относительно глобально-заданных директорий.
2. импорт фалов относительно текущего файла в котором применятеся @import директива.

**1 способ**. Глобально-заданные директории - директории, пути до которых прописаны в настройках компилятора sass(в данном случае используется compass компилятор). То есть в настройках compass-а задается путь до директории с scss-файлами - это директори и будет считаться глобально-заданной, заданной через `sass_dir` в настройках compass. Так же можно задавать глобально свои директории, для этого в compass есть `add_import_path`. В плагинах к gulp `sass_dir`, `add_import_path` могут иметь др. вид, к примеру, в плагине [gulp-compass](//www.npmjs.com/package/gulp-compass) путь до sass директории задается присваеванием объекту настроек компилятора в свойство sass строки, содержащей путь до sass директории, дополнительные глобально-заданные директории добавляются в массив `import_path` в том же объекте настроек компилятора.
Импортировать какой-либо файл из глобально-заданной директории можно прописав в `@import` директиве путь до файла, относительно этой директивы. У нас есть в глобально-заданные директории: sass(наши scss файлы), compass(scss файлы сторонней библиотеки). Например, надо импортировать из sass диретории файл `_env-imports.scss` и из директории _env и файл `_css3.scss` из compass:

    @import "_env/env-imports";
    @import "compass/css3";

То есть просто прописыватся путь до файла относительно глобально-заданной директории.

**2 способ**. Путь до какого-либо файла задается относительно текущего scss-файла, в котором применятеся директива `@import` c префиксом в начале пути - "./". Можно задавать пути до файлов, как и в 1 способе и они будут подключатся, но так делать не надо - различить, где путь прописан от глобально-заданной, а где от текущего файла не возможно - для таких случаех и нужен этот префикс.
Пример:

    @import "./{путь до файла}";

####working-dir / src / html /

В директории распологаются исходники страниц, HTML код. Сами сраницы разбиты по частям для удобства, из этих частей страница собирается gulp-плагином [gulp-htmlincluder](https://www.npmjs.com/package/gulp-htmlincluder/). У плагина есть свои рекомендации по именованию частей страницы, о которых можно прочитать перейдя по предыдущей ссылке на страницу плагина.

*Организация исходников отдельных страниц*

В директории `working-dir / src / html /` создается поддиректория с названием страницы, сама директория страницы выглядет следующим образом:

    {page-name}/
    |- blocks/                - * 1
    |- layout/                - * 2
       |- -head.html          - * 2.1
       |- -body.html          - * 2.2
       |- -IE-conditions.html - * 2.3
       |- -scripts.html       - * 2.4
    |- index.html             - * 3
    
Описание пунктов:

1. Отдельные блоки на странице: шапка, футер, контент и все что в нем содержится. Разделение на блоки происходить по усмотрению автора кода, т.е. он сам разделяет страницу так, как считает нужным. Разделение страницы на блоки, мини-блоки полезно для удобства - если нужно дописать/поправить/изменить код некоторого блока на страницы, то нужно всего лишь найти html файл блока в директории, а не искать в длинном коде всей странице так, как это было б если не использовать сборшика html страниц.
2. Разметка страницы. Здесь располагаются части HTML страницы, которые отвечают за основную разметку страницы:
2.1 Все содержимое `head` тэга, включая его самого.
2.2 Обертка для контента страницы.
2.3 Условия для IE.
2.4 Подключаемые скрипты на страницы перед закрывающим тэгом </body>
3. Страница, где прописаны все нужные подключания файлов из `layout/` и `blocks/` для сборки страницы.

Такое разделение не обязательно и не обязательно использовать сборщик - все это только для удобства верстки, не больше.
Подробнее о наименование отдельных частей html-страницы и прочее можно прочитать на странице gulp-плагина, через который проходит сборка - [gulp-htmlincluder](https://www.npmjs.com/package/gulp-htmlincluder/).
Примечание: для сборки html-страниц можно использовать др. плагины, подобные [gulp-htmlincluder](https://www.npmjs.com/package/gulp-htmlincluder/) либо шаблонизаторы, ограничений нет.

#Полезные ссылки:

1. [MindBEMding – getting your head ’round BEM syntax](http://csswizardry.com/2013/01/mindbemding-getting-your-head-round-bem-syntax/) ([RU](http://frontender.info/MindBEMding/))
2. [BEMIT](http://csswizardry.com/2015/08/bemit-taking-the-bem-naming-convention-a-step-further/) ([RU](http://frontender.info/bemit-taking-the-bem-naming-convention-a-step-further/))
4. [CSS Architecture](http://philipwalton.com/articles/css-architecture/) ([RU](http://web-standards.ru/articles/css-architecture/))
5. [More Transparent UI Code with Namespaces](http://csswizardry.com/2015/03/more-transparent-ui-code-with-namespaces/)
6. [component-based HTML/CSS naming and patterns](https://gist.github.com/necolas/1309546)
7. [SMACSS](http://smacss.com/)
8. [БЭМ](https://ru.bem.info/)
9. [Gulp Organization & Structure](https://blog.simpleblend.net/gulp-organization-structure/)
